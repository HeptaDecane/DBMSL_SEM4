{"ast":null,"code":"var _jsxFileName = \"/home/near/Alpha/Stack/IPR-Portal/frontend/src/components/router.js\";\nimport React, { Component } from \"react\";\nimport LoginForm from \"./login\";\nimport SignupForm from \"./signup\";\nimport VerifyEmail from \"./verifyemail\";\nimport axios from \"axios\";\nimport HomePage from \"./HomePage\";\nimport Navbar from \"./Navbar\";\nexport default class Router extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      step: 0,\n      firstname: \"\",\n      lastname: \"\",\n      email: \"\",\n      password: \"\",\n      otpRecieved: \"\",\n      otpSent: \"\"\n    };\n\n    this.nextStep = () => {\n      const {\n        step\n      } = this.state;\n      this.setState({\n        step: step + 1\n      });\n    };\n\n    this.prevStep = () => {\n      const {\n        step\n      } = this.state;\n      this.setState({\n        step: step - 1\n      });\n    };\n\n    this.handleChange = input => e => {\n      this.setState({\n        [input]: e.target.value\n      });\n    };\n\n    this.handleSubmitSignup = e => {\n      axios({\n        method: \"POST\",\n        data: {\n          username: this.state.email,\n          first_name: this.state.firstname,\n          last_name: this.state.lastname,\n          email: this.state.email,\n          password: this.state.password\n        },\n        url: \"http://127.0.0.1:8000/api/sign-up/\"\n      }).then(response => {\n        console.log(response.data);\n        this.setState({\n          otpRecieved: response.data.otp\n        });\n      });\n    };\n\n    this.handleSubmitLogin = e => {\n      axios({\n        method: \"POST\",\n        headers: {\n          \"Access-Control-Allow-Origin\": \"*\",\n          \"Content-Type\": \"application/json\"\n        },\n        data: {\n          username: this.state.email,\n          password: this.state.password\n        },\n        url: \"http://127.0.0.1:8000/api/login/\"\n      }).then(response => {\n        document.cookie = `usertoken=${response.data.token}`;\n        this.nextStep();\n      });\n    };\n\n    this.checkMail = e => {\n      console.log(this.state);\n\n      if (this.state.otpSent === this.state.otpRecieved) {\n        this.setState({\n          step: 0\n        });\n      } else {\n        this.setState({\n          step: 2\n        });\n      }\n    };\n  }\n\n  render() {\n    const {\n      firstName,\n      lastName,\n      email,\n      password\n    } = this.state;\n    const values = {\n      firstName,\n      lastName,\n      email,\n      password\n    };\n    const {\n      step\n    } = this.state;\n\n    switch (step) {\n      case 3:\n        return /*#__PURE__*/React.createElement(VerifyEmail, {\n          handleChange: this.handleChange,\n          checkMail: this.checkMail,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 93,\n            columnNumber: 11\n          }\n        });\n\n      case 2:\n        return /*#__PURE__*/React.createElement(SignupForm, {\n          prevStep: this.prevStep,\n          handleChange: this.handleChange,\n          values: values,\n          handleSubmitSignup: this.handleSubmitSignup,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 100,\n            columnNumber: 11\n          }\n        });\n\n      case 1:\n        return /*#__PURE__*/React.createElement(LoginForm, {\n          nextStep: this.nextStep,\n          handleChange: this.handleChange,\n          values: values,\n          handleSubmitLogin: this.handleSubmitLogin,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 109,\n            columnNumber: 11\n          }\n        });\n\n      default:\n        return /*#__PURE__*/React.createElement(HomePage, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 117,\n            columnNumber: 16\n          }\n        });\n    }\n  }\n\n}","map":{"version":3,"sources":["/home/near/Alpha/Stack/IPR-Portal/frontend/src/components/router.js"],"names":["React","Component","LoginForm","SignupForm","VerifyEmail","axios","HomePage","Navbar","Router","state","step","firstname","lastname","email","password","otpRecieved","otpSent","nextStep","setState","prevStep","handleChange","input","e","target","value","handleSubmitSignup","method","data","username","first_name","last_name","url","then","response","console","log","otp","handleSubmitLogin","headers","document","cookie","token","checkMail","render","firstName","lastName","values"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport LoginForm from \"./login\";\nimport SignupForm from \"./signup\";\nimport VerifyEmail from \"./verifyemail\";\nimport axios from \"axios\";\nimport HomePage from \"./HomePage\";\nimport Navbar from \"./Navbar\";\n\nexport default class Router extends Component {\n  state = {\n    step: 0,\n    firstname: \"\",\n    lastname: \"\",\n    email: \"\",\n    password: \"\",\n    otpRecieved: \"\",\n    otpSent: \"\",\n  };\n  // Proceed to next step\n  nextStep = () => {\n    const { step } = this.state;\n    this.setState({\n      step: step + 1,\n    });\n  };\n\n  // Go back to prev step\n  prevStep = () => {\n    const { step } = this.state;\n    this.setState({\n      step: step - 1,\n    });\n  };\n  handleChange = (input) => (e) => {\n    this.setState({ [input]: e.target.value });\n  };\n  handleSubmitSignup = (e) => {\n    axios({\n      method: \"POST\",\n      data: {\n        username: this.state.email,\n        first_name: this.state.firstname,\n        last_name: this.state.lastname,\n        email: this.state.email,\n        password: this.state.password,\n      },\n      url: \"http://127.0.0.1:8000/api/sign-up/\",\n    }).then((response) => {\n      console.log(response.data);\n      this.setState({\n        otpRecieved: response.data.otp,\n      });\n    });\n  };\n\n  handleSubmitLogin = (e) => {\n    axios({\n      method: \"POST\",\n      headers: {\n        \"Access-Control-Allow-Origin\": \"*\",\n        \"Content-Type\": \"application/json\",\n      },\n      data: {\n        username: this.state.email,\n        password: this.state.password,\n      },\n      url: \"http://127.0.0.1:8000/api/login/\",\n    }).then((response) => {\n      document.cookie = `usertoken=${response.data.token}`;\n      this.nextStep();\n    });\n  };\n\n  checkMail = (e) => {\n    console.log(this.state);\n    if (this.state.otpSent === this.state.otpRecieved) {\n      this.setState({\n        step: 0,\n      });\n    } else {\n      this.setState({\n        step: 2,\n      });\n    }\n  };\n  render() {\n    const { firstName, lastName, email, password } = this.state;\n    const values = { firstName, lastName, email, password };\n    const { step } = this.state;\n    switch (step) {\n      case 3:\n        return (\n          <VerifyEmail\n            handleChange={this.handleChange}\n            checkMail={this.checkMail}\n          />\n        );\n      case 2:\n        return (\n          <SignupForm\n            prevStep={this.prevStep}\n            handleChange={this.handleChange}\n            values={values}\n            handleSubmitSignup={this.handleSubmitSignup}\n          />\n        );\n      case 1:\n        return (\n          <LoginForm\n            nextStep={this.nextStep}\n            handleChange={this.handleChange}\n            values={values}\n            handleSubmitLogin={this.handleSubmitLogin}\n          />\n        );\n      default:\n        return <HomePage />;\n    }\n  }\n}\n"]},"metadata":{},"sourceType":"module"}