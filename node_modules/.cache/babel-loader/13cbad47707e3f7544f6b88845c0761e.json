{"ast":null,"code":"import _defineProperty from\"/home/near/Alpha/Stack/IPR-Portal/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/home/near/Alpha/Stack/IPR-Portal/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/near/Alpha/Stack/IPR-Portal/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/near/Alpha/Stack/IPR-Portal/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/near/Alpha/Stack/IPR-Portal/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import axios from'axios';import MuiThemeProvider from\"material-ui/styles/MuiThemeProvider\";import TextField from\"material-ui/TextField\";import RaisedButton from\"material-ui/RaisedButton\";import{Link,Redirect}from'react-router-dom';var styles={button:{margin:15}};export var Login=/*#__PURE__*/function(_React$Component){_inherits(Login,_React$Component);var _super=_createSuper(Login);function Login(props){var _this;_classCallCheck(this,Login);_this=_super.call(this,props);_this.changeHandler=function(e){_this.setState(_defineProperty({},e.target.id,e.target.value));};_this.submitHanler=function(e){e.preventDefault();var form={};form.username=_this.state.email;form.password=_this.state.password;console.log(form);axios.post('http://104.197.122.210:8000/api/login/',form).then(function(response){_this.setState({token:response.data.token});if(_this.state.token){_this.setState({authenticated:true});}console.log(response);console.log(_this.state.token);}).catch(function(error){_this.setState({error:error.response});console.log(_this.state.error);});};_this.state={email:\"\",password:\"\",error:null,authenticated:false};return _this;}_createClass(Login,[{key:\"render\",value:function render(){var _this$state=this.state,email=_this$state.email,password=_this$state.password,authenticated=_this$state.authenticated;if(authenticated){localStorage.setItem('token',this.state.token);return/*#__PURE__*/React.createElement(Redirect,{to:\"/profile\"});}if(localStorage.getItem('token')){return/*#__PURE__*/React.createElement(Redirect,{to:\"/profile\"});}return/*#__PURE__*/React.createElement(MuiThemeProvider,null,/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(Link,{to:\"/login\"},/*#__PURE__*/React.createElement(RaisedButton,{label:\"log-In\",primary:false,style:styles.button})),/*#__PURE__*/React.createElement(Link,{to:\"/signup\"},/*#__PURE__*/React.createElement(RaisedButton,{label:\"Sign-Up\",primary:true,style:styles.button})),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(TextField,{hintText:\"Enter your email\",floatingLabelText:\"E-mail\",type:\"email\",id:\"email\",value:email,onChange:this.changeHandler}),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(TextField,{hintText:\"Password\",floatingLabelText:\"Password\",type:\"password\",id:\"password\",value:password,onChange:this.changeHandler}),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(RaisedButton,{label:\"Submit\",primary:true,style:styles.button,onClick:this.submitHanler})));}}]);return Login;}(React.Component);export default Login;","map":{"version":3,"sources":["/home/near/Alpha/Stack/IPR-Portal/frontend/src/components/Login.js"],"names":["React","axios","MuiThemeProvider","TextField","RaisedButton","Link","Redirect","styles","button","margin","Login","props","changeHandler","e","setState","target","id","value","submitHanler","preventDefault","form","username","state","email","password","console","log","post","then","response","token","data","authenticated","catch","error","localStorage","setItem","getItem","Component"],"mappings":"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","sourcesContent":["import React from 'react'\nimport axios from 'axios'\nimport MuiThemeProvider from \"material-ui/styles/MuiThemeProvider\";\nimport TextField from \"material-ui/TextField\";\nimport RaisedButton from \"material-ui/RaisedButton\";\nimport {Link,Redirect} from 'react-router-dom';\n\nconst styles = {\n\tbutton: {\n\t\tmargin: 15,\n    },\n};\n\nexport class Login extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props)\n\t\n\t\tthis.state = {\n\t\t\t email: \"\",\n\t\t\t password: \"\",\n\t\t\t error: null,\n\t\t\t authenticated: false,\n\t\t}\n\t}\n\n\tchangeHandler = (e)=>{\n\t\tthis.setState({\n\t\t\t[e.target.id]: e.target.value\n\t\t})\n\t}\n\n\tsubmitHanler = (e)=>{\n\t\te.preventDefault()\n\t\tlet form={}\n\t\tform.username = this.state.email\n\t\tform.password = this.state.password\n\t\tconsole.log(form)\n\t\taxios.post('http://104.197.122.210:8000/api/login/',form)\n\t\t.then(\n\t\t\t(response)=>{\n\t\t\t\tthis.setState({\n\t\t\t\t\ttoken: response.data.token,\n\t\t\t\t})\n\t\t\t\tif(this.state.token){\n\t\t\t\t\tthis.setState({authenticated:true})\n\t\t\t\t}\n\t\t\t\tconsole.log(response)\n\t\t\t\tconsole.log(this.state.token)\n\t\t\t}\n\t\t)\n\t\t.catch(\n\t\t\t(error)=>{\n\t\t\t\tthis.setState({error: error.response})\n\t\t\t\tconsole.log(this.state.error)\n\t\t\t}\n\t\t)\n\t}\n\n\trender() {\n\t\tlet {email,password,authenticated} = this.state\n\t\tif (authenticated){\n\t\t\tlocalStorage.setItem('token',this.state.token)\n\t\t\treturn <Redirect to=\"/profile\" />\n\t\t}\n\t\tif (localStorage.getItem('token')){\n\t\t\treturn <Redirect to=\"/profile\" />\n\t\t}\n\t\treturn (\n\t\t\t<MuiThemeProvider>\n\t\t\t\t<React.Fragment>\n\t\t\t\t\t<br/>\n\t\t\t\t\t<Link to=\"/login\">\n\t\t\t\t\t\t<RaisedButton\t\n\t\t\t\t\t\t\tlabel=\"log-In\"\n\t\t\t\t\t\t\tprimary={false} \n\t\t\t\t\t\t\tstyle={styles.button} \n\t\t\t\t\t\t/>\n\t\t\t\t\t</Link>\n\t\t\t\t\t<Link to=\"/signup\">\n\t\t\t\t\t\t<RaisedButton\n\t\t\t\t            label=\"Sign-Up\"\n\t\t\t\t            primary={true}\n\t\t\t\t            style={styles.button}\n\t        \t\t\t/>\n        \t\t\t</Link>\n        \t\t\t<br/>\n        \t\t\t<TextField\n\t\t\t            hintText=\"Enter your email\"\n\t\t\t            floatingLabelText=\"E-mail\"\n\t\t\t            type=\"email\"\n\t\t\t            id=\"email\"\n\t\t\t            value={email}\n\t\t\t            onChange={this.changeHandler}\n\t\t        \t/>\n\t\t        \t<br/>\n\t\t        \t<TextField\n\t\t\t\t        hintText=\"Password\"\n\t\t\t\t        floatingLabelText=\"Password\"\n\t\t\t\t        type=\"password\"\n\t\t\t\t        id=\"password\"\n\t\t\t\t        value={password}\n\t\t\t\t        onChange={this.changeHandler}\n\t\t\t\t    />\n\t\t\t\t    <br/>\n\t\t\t\t    <RaisedButton\n\t\t\t            label=\"Submit\"\n\t\t\t            primary={true}\n\t\t\t            style={styles.button}\n\t\t\t            onClick={this.submitHanler}\n\t\t\t        />\n\t\t\t\t</React.Fragment>\n\t\t\t</MuiThemeProvider>\n\t\t)\n\t}\n}\n\nexport default Login"]},"metadata":{},"sourceType":"module"}