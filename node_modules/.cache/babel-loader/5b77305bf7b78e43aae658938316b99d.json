{"ast":null,"code":"var _jsxFileName = \"/home/near/Alpha/Stack/IPR-Portal/frontend/src/components/VerifyEmail.js\";\nimport React from \"react\";\nimport { Link, Redirect } from 'react-router-dom';\nimport axios from 'axios';\nimport TextField from \"material-ui/TextField\";\nimport MuiThemeProvider from \"material-ui/styles/MuiThemeProvider\";\nimport RaisedButton from \"material-ui/RaisedButton\";\nexport class VerifyEmail extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      emailVerified: false,\n      authenticated: true,\n      min: 2,\n      sec: 0\n    };\n  }\n\n  componentDidMount() {\n    this.myInterval = setInterval(() => {\n      const {\n        min,\n        sec\n      } = this.state;\n\n      if (sec > 0) {\n        this.setState(({\n          sec\n        }) => ({\n          sec: sec - 1\n        }));\n      }\n\n      if (sec === 0) {\n        if (min === 0) {\n          clearInterval(this.myInterval);\n        } else {\n          this.setState(({\n            min\n          }) => ({\n            min: min - 1,\n            sec: 59\n          }));\n        }\n      }\n    }, 1000);\n    let authAxios = axios.create({\n      headers: {\n        Authorization: `Token ${localStorage.getItem('token')}`\n      }\n    });\n    authAxios.get('http://localhost:8000/api/default/').then(response => {\n      this.setState({\n        context: response.data,\n        authenticated: true,\n        emailVerified: response.data.email_verified\n      });\n      console.log(this.state.context);\n    }).catch(error => {\n      this.setState({\n        error: error.response\n      });\n      console.log(this.state.error);\n\n      if (this.state.error.status === 423) {\n        this.setState({\n          emailVerified: true\n        });\n      }\n\n      if (this.state.error.status === 401) {\n        this.setState({\n          authenticated: false\n        });\n      }\n    });\n  }\n\n  componentWillUnmount() {\n    clearInterval(this.myInterval);\n  }\n\n  render() {\n    const {\n      min,\n      sec,\n      emailVerified\n    } = this.state; // const { checkMail, handleChange } = this.props;\n\n    if (emailVerified) {\n      return /*#__PURE__*/React.createElement(Redirect, {\n        to: \"/profile\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 16\n        }\n      });\n    }\n\n    return /*#__PURE__*/React.createElement(MuiThemeProvider, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(React.Fragment, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 23\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 29\n      }\n    }), /*#__PURE__*/React.createElement(\"h2\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 17\n      }\n    }, \"User Verification\"), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 23\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 29\n      }\n    }), /*#__PURE__*/React.createElement(TextField, {\n      hintText: \"6 digit otp\",\n      floatingLabelText: \"6 Digit OTP\" //  onChange={handleChange(\"otpSent\")}\n      ,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(RaisedButton, {\n      label: \"Check email\",\n      primary: \"true\" //   onClick={checkMail}\n      ,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 22\n      }\n    }), /*#__PURE__*/React.createElement(RaisedButton, {\n      label: \"Resend OTP\",\n      primary: \"true\",\n      disabled: false,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"h5\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 21\n      }\n    }), \"Resend OTP in \", min, \":\", sec)));\n  }\n\n}\nexport default VerifyEmail;","map":{"version":3,"sources":["/home/near/Alpha/Stack/IPR-Portal/frontend/src/components/VerifyEmail.js"],"names":["React","Link","Redirect","axios","TextField","MuiThemeProvider","RaisedButton","VerifyEmail","Component","constructor","props","state","emailVerified","authenticated","min","sec","componentDidMount","myInterval","setInterval","setState","clearInterval","authAxios","create","headers","Authorization","localStorage","getItem","get","then","response","context","data","email_verified","console","log","catch","error","status","componentWillUnmount","render"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport {Link,Redirect} from 'react-router-dom';\nimport axios from 'axios';\nimport TextField from \"material-ui/TextField\";\nimport MuiThemeProvider from \"material-ui/styles/MuiThemeProvider\";\nimport RaisedButton from \"material-ui/RaisedButton\";\n\nexport class VerifyEmail extends React.Component {\n    constructor(props) {\n        super(props)\n  \n        this.state = {\n            emailVerified: false,\n            authenticated:true,\n            min:2,\n            sec:0,\n        }\n    }\n\n    componentDidMount() {\n        this.myInterval = setInterval(() => {\n            const { min, sec } = this.state;\n\n            if (sec > 0) {\n                this.setState(({ sec }) => ({\n                sec: sec - 1,\n                }));\n            }\n            if (sec === 0) {\n                if (min === 0) {\n                clearInterval(this.myInterval);\n                } else {\n                    this.setState(({ min }) => ({\n                        min: min - 1,\n                        sec: 59,\n                    }));\n                }\n            }   \n        }, 1000);\n\n        let authAxios=axios.create({\n            headers: {\n                Authorization: `Token ${localStorage.getItem('token')}`\n            }\n        });\n        authAxios.get('http://localhost:8000/api/default/')\n        .then(\n            (response)=>{\n                this.setState({\n                    context:response.data,\n                    authenticated: true,\n                    emailVerified: response.data.email_verified\n                })\n                console.log(this.state.context)\n            }\n        )\n        .catch(\n            (error)=>{\n                this.setState({\n                    error:error.response,\n                })\n                console.log(this.state.error)\n                if(this.state.error.status===423){\n                    this.setState({emailVerified:true})\n                }\n                if(this.state.error.status===401){\n                    this.setState({authenticated:false})\n                }\n            }\n        )\n\n  }\n\n  componentWillUnmount() {\n    clearInterval(this.myInterval);\n  }\n\n  render() {\n    const { min, sec,emailVerified } = this.state;\n    // const { checkMail, handleChange } = this.props;\n    if(emailVerified){\n        return(<Redirect to=\"/profile\" />)\n    }\n    return (\n        <MuiThemeProvider>\n            <React.Fragment>\n                <br /><br /><br />\n                <h2>User Verification</h2>\n                <br /><br /><br />\n\n                <TextField\n                    hintText=\"6 digit otp\"\n                    floatingLabelText=\"6 Digit OTP\"\n                  //  onChange={handleChange(\"otpSent\")}\n                />\n                <RaisedButton\n                    label=\"Check email\"\n                    primary=\"true\"\n                 //   onClick={checkMail}\n                />\n                <br/><br/>\n                <RaisedButton label=\"Resend OTP\" primary=\"true\" disabled={false}/>\n                <h5>\n                    <br/>Resend OTP in {min}:{sec}\n                </h5>\n            </React.Fragment>\n        </MuiThemeProvider>\n    );\n  }\n}\n\nexport default VerifyEmail"]},"metadata":{},"sourceType":"module"}